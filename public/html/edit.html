<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit</title>
    <link rel="stylesheet" href="../css/config.css">
    <link rel="stylesheet" href="../css/iconfont.css">
    <link rel="stylesheet" href="../sass/css/edit.css"></link>
<script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4F46E5',
                        secondary: '#10B981',
                        neutral: '#F3F4F6',
                        dark: '#1F2937'
                    },
                    fontFamily: {
                        inter: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .emoji-btn {
                @apply text-gray-500 hover:text-primary transition-colors cursor-pointer p-2 rounded-full hover:bg-gray-100;
            }
            .emoji-item {
                @apply text-2xl p-2 hover:bg-gray-100 rounded cursor-pointer transition-all;
            }
            .emoji-panel {
                @apply absolute bg-white rounded-lg shadow-lg p-2 w-64 z-10 transition-all duration-300 ease-in-out transform origin-top;
            }
        }
    </style>
</head>
<body class="bg-gray-50 font-inter">
    <!-- æ–‡æœ¬ç¼–è¾‘æ¨¡å— -->
    <div class="max-w-3xl mx-auto p-4">
        <form action="community.html" method="get" class="bg-white rounded-xl shadow-sm p-4 mt-8">
            <div class="relative">
                <textarea id="content" placeholder="è¯´ç‚¹ä»€ä¹ˆå§ï¼" class="w-full h-40 p-4 border border-gray-200 rounded-lg focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all resize-none"></textarea>
                
                <!-- è¡¨æƒ…åŒ…æŒ‰é’® -->
                <span id="emojiBtn" class="emoji-btn absolute -bottom-10 left-2">
                    <i class="fa-regular fa-face-smile"></i>
                </span>
                
                <!-- è¡¨æƒ…åŒ…é¢æ¿ (é»˜è®¤éšè—) -->
                <div id="emojiPanel" class="emoji-panel hidden grid grid-cols-8 gap-1 -bottom-[220px] left-2">
                    <div class="emoji-item" data-emoji="ğŸ˜€">ğŸ˜€</div>
                    <div class="emoji-item" data-emoji="ğŸ˜‚">ğŸ˜‚</div>
                    <div class="emoji-item" data-emoji="ğŸ˜Š">ğŸ˜Š</div>
                    <div class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</div>
                    <div class="emoji-item" data-emoji="ğŸ¤”">ğŸ¤”</div>
                    <div class="emoji-item" data-emoji="ğŸ‘">ğŸ‘</div>
                    <div class="emoji-item" data-emoji="â¤ï¸">â¤ï¸</div>
                    <div class="emoji-item" data-emoji="ğŸ‘">ğŸ‘</div>
                    <div class="emoji-item" data-emoji="ğŸ‰">ğŸ‰</div>
                    <div class="emoji-item" data-emoji="ğŸš€">ğŸš€</div>
                    <div class="emoji-item" data-emoji="ğŸ±">ğŸ±</div>
                    <div class="emoji-item" data-emoji="ğŸŒ">ğŸŒ</div>
                    <div class="emoji-item" data-emoji="ğŸ”">ğŸ”</div>
                    <div class="emoji-item" data-emoji="ğŸ®">ğŸ®</div>
                    <div class="emoji-item" data-emoji="ğŸ“š">ğŸ“š</div>
                    <div class="emoji-item" data-emoji="ğŸ’¡">ğŸ’¡</div>
                    <div class="emoji-item" data-emoji="âœ¨">âœ¨</div>
                    <div class="emoji-item" data-emoji="ğŸ”¥">ğŸ”¥</div>
                    <div class="emoji-item" data-emoji="ğŸ’¯">ğŸ’¯</div>
                    <div class="emoji-item" data-emoji="ğŸ¯">ğŸ¯</div>
                    <div class="emoji-item" data-emoji="ğŸŒŸ">ğŸŒŸ</div>
                    <div class="emoji-item" data-emoji="ğŸ’»">ğŸ’»</div>
                    <div class="emoji-item" data-emoji="ğŸ¨">ğŸ¨</div>
                    <div class="emoji-item" data-emoji="ğŸµ">ğŸµ</div>
                    <div class="emoji-item" data-emoji="ğŸ’¬">ğŸ’¬</div>
                    <div class="emoji-item" data-emoji="ğŸ’­">ğŸ’­</div>
                    <div class="emoji-item" data-emoji="ğŸ‘€">ğŸ‘€</div>
                    <div class="emoji-item" data-emoji="ğŸ">ğŸ</div>
                    <div class="emoji-item" data-emoji="ğŸ†">ğŸ†</div>
                    <div class="emoji-item" data-emoji="ğŸ’ª">ğŸ’ª</div>
                    <div class="emoji-item" data-emoji="ğŸ˜">ğŸ˜</div>
                </div>
            </div>
            
            <div class="flex flex-col sm:flex-row justify-between items-start sm:items-center mt-12 space-y-4 sm:space-y-0">
                <div class="flex space-x-2">
                    <span class="text-gray-500 hover:text-primary transition-colors cursor-pointer p-2 rounded-full hover:bg-gray-100">
                        <i class="fa-solid fa-hashtag"></i>
                    </span>
                    <span class="text-gray-500 hover:text-primary transition-colors cursor-pointer p-2 rounded-full hover:bg-gray-100">
                        <i class="fa-solid fa-at"></i>
                    </span>
                    <span class="text-gray-500 hover:text-primary transition-colors cursor-pointer p-2 rounded-full hover:bg-gray-100">
                        <i class="fa-solid fa-image"></i>
                    </span>
                </div>
                
                <div class="flex items-center space-x-4">
                    <label for="see" class="text-gray-700">å¯è§èŒƒå›´ï¼š</label>
                    <select id="see" class="border border-gray-200 rounded-lg p-2 focus:ring-2 focus:ring-primary/50 focus:border-primary transition-all">
                        <option value="everyone">æ‰€æœ‰äºº</option>
                        <option value="followers">ä»…å…³æ³¨</option>
                        <option value="onlyme">ä»…è‡ªå·±</option>
                    </select>
                    <button type="submit" class="bg-primary hover:bg-primary/90 text-white px-6 py-2 rounded-lg transition-all shadow-md hover:shadow-lg transform hover:-translate-y-0.5">
                        å‘è¡¨
                    </button>
                </div>
            </div>
        </form>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const contentTextarea = document.getElementById('content');
            const emojiBtn = document.getElementById('emojiBtn');
            const emojiPanel = document.getElementById('emojiPanel');
            const emojiItems = document.querySelectorAll('.emoji-item');
            
            // ç‚¹å‡»è¡¨æƒ…åŒ…æŒ‰é’®æ—¶æ˜¾ç¤º/éšè—è¡¨æƒ…åŒ…é¢æ¿
            emojiBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                emojiPanel.classList.toggle('hidden');
                
                // æ·»åŠ åŠ¨ç”»æ•ˆæœ
                if (!emojiPanel.classList.contains('hidden')) {
                    emojiPanel.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                        emojiPanel.classList.remove('opacity-0', 'scale-95');
                    }, 10);
                }
            });
            
            // ç‚¹å‡»è¡¨æƒ…åŒ…æ—¶å°†è¡¨æƒ…æ’å…¥åˆ°æ–‡æœ¬æ¡†ä¸­
            emojiItems.forEach(item => {
                item.addEventListener('click', function() {
                    const emoji = this.getAttribute('data-emoji');
                    insertEmoji(emoji);
                    emojiPanel.classList.add('opacity-0', 'scale-95');
                    setTimeout(() => {
                        emojiPanel.classList.add('hidden');
                        emojiPanel.classList.remove('opacity-0', 'scale-95');
                    }, 200);
                });
            });
            
            // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹æ—¶å…³é—­è¡¨æƒ…åŒ…é¢æ¿
            document.addEventListener('click', function(e) {
                if (!emojiPanel.contains(e.target) && e.target !== emojiBtn) {
                    emojiPanel.classList.add('hidden');
                }
            });
            
            // æ’å…¥è¡¨æƒ…åˆ°æ–‡æœ¬æ¡†çš„å½“å‰å…‰æ ‡ä½ç½®
            function insertEmoji(emoji) {
                const start = contentTextarea.selectionStart;
                const end = contentTextarea.selectionEnd;
                const text = contentTextarea.value;
                
                // æ’å…¥è¡¨æƒ…
                contentTextarea.value = text.substring(0, start) + emoji + text.substring(end);
                
                // ç§»åŠ¨å…‰æ ‡åˆ°æ’å…¥åçš„ä½ç½®
                contentTextarea.selectionStart = contentTextarea.selectionEnd = start + emoji.length;
                
                // è§¦å‘æ–‡æœ¬æ¡†çš„inputäº‹ä»¶
                const event = new Event('input', { bubbles: true });
                contentTextarea.dispatchEvent(event);
            }
        });
    </script>
<script type="module" src="../js/edit.js"></script>
</html>